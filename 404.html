---
permalink: 404.html
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  <title>snlx.net</title>
  <link rel="stylesheet" href="/base.css">
  <link rel="stylesheet" href="/forms.css">
  <link rel="stylesheet" href="/garden.css">
  <link rel="stylesheet" href="/transitions-garden.css">
  <link rel="stylesheet" href="/theme-mocha.css">
</head>
<body>
  <main class="markdown content" id="root">
    <h1>Just a moment...</h1>
  </main>

  <div class="sidebar">
    <a href="/" class="logo-link">
      <svg viewBox="0 0 16 16" class="logo" id="logo">
        <style>
          path {
            stroke-width: 1.4;
            stroke: var(--logo-bg);
          }
        </style>

        <defs>
          <linearGradient id="grass">
            <stop offset="0%" stop-color="var(--logo-bottom-left)" />
            <stop offset="100%" stop-color="var(--logo-bottom-right)" />
          </linearGradient>
          <linearGradient id="water">
            <stop offset="0%" stop-color="var(--logo-top-left)" />
            <stop offset="100%" stop-color="var(--logo-top-right)" />
          </linearGradient>
          <path
            d="
              M 1, 4

              L 6, 7
              Q 8, 8
                10, 7

              L 15, 4

              L 10, 1
              Q 8, 0
                6, 1

              Z
            "
            id="top"
          />
          <path
            d="
              M 1, 4

              L 1, 10
              Q 1, 12
                3, 13.2

              L 6,  15
              Q 8,  16
                10, 15

              L 13, 13.2
              Q 15, 12
                15, 10

              L 15, 4
              Z
            "
            id="bottom"
          />
        </defs>

        <rect
          width="100%"
          height="100%"
          fill="var(--logo-bg)"
        />

        <use
          href="#bottom"
          fill="url(#grass)"
          y="-0.5"
        />
        <use
          href="#top"
          fill="url(#water)"
          y="1"
        />
        <use
          href="#top"
          fill="transparent"
          y="-2.4"
        />
      </svg>
    </a>
    <h2 id="section">garden</h2>
    <div class="stat">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-feather-icon lucide-feather"><path d="M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z"/><path d="M16 8 2 22"/><path d="M17.5 15H9"/></svg>
      <span id="created">...</span>
    </div>
    <div class="stat">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw-icon lucide-refresh-cw"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
      <span id="updated">...</span>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/marked/lib/marked.umd.js"></script>
  <script>
    // from base.njk
    function calculateRelativeDate(dateObj) {
      const now = new Date()
      const diffDays = Math.floor((now - dateObj) / 1000 / 60 / 60 / 24)
      if (diffDays > 365) {
        return (diffDays/365).toFixed(1) + " yrs"
      }
      if (diffDays > 99) {
        return (diffDays/30.5).toFixed(1) + " mo"
      }
      return diffDays + "d"
    }

    async function main() {
      const filename = window.location.pathname.replace("/", " ").trim()
      const saved = JSON.parse(localStorage.getItem("ids")).join(",")

      const response = await fetch(`https://api.snlx.net/find?name=${filename}&among=${saved}`)
      if (response.status !== 200) {
        throw new Error()
      }

      section.textContent = "secret note"
      logo.style.setProperty("--logo-top-left", "#f38ba8")
      logo.style.setProperty("--logo-top-right", "#fab387")
      logo.style.setProperty("--logo-bottom-left", "#6c7086")
      logo.style.setProperty("--logo-bottom-right", "#7f849c")

      const page = await response.text()
      const [[_, frontmatter, body]] = page.matchAll(/---\n([\s\S]+?)\n---\n([\s\S]+)/gm)
      root.innerHTML = marked.parse(body.trim())

      console.log(frontmatter)
      try {
        const createdDate = new Date(frontmatter.match(/created: .+/gm)[0].split(": ")[1].trim())
        const updatedDate = new Date(frontmatter.match(/updated: .+/gm)[0].split(": ")[1].trim())
        created.textContent = calculateRelativeDate(createdDate)
        updated.textContent = calculateRelativeDate(updatedDate)
      } catch {
        console.log("no dates in the note")
      }
    }

    main().catch(() => {
      root.innerHTML = "<h1>404</h1><p>Either this note does not exist or you don't have permission to view it</p>"
    })
  </script>
</body>
</html>
