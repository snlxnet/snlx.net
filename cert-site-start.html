<!doctype html>
<html>

<head>
    <title>cert-site-start</title>
    <link rel="stylesheet" href="https://snlx.net/new.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
</head>

<body>
    <nav>
        <h2>Linked Notes</h2>
        <ul>
            <li class="back"><a href="/old-index">old-index</a></li>
            <li class="back"><a href="/cert-typ">cert-typ</a></li>
            <li class="current"><a href="/cert-site-start">cert-site-start</a></li>
        </ul><a class="source" href="https://github.com/snlxnet/snlx.net"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github">
                <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path>
                <path d="M9 18c-4.51 2-5-2-7-2"></path>
            </svg>Source&nbsp;code</a>
    </nav>
    <main>
        <div class="metadata">
            <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-feather-icon lucide-feather">
                    <path d="M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z"></path>
                    <path d="M16 8 2 22"></path>
                    <path d="M17.5 15H9"></path>
                </svg>created 97d ago</div>
            <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw-icon lucide-refresh-cw">
                    <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                    <path d="M21 3v5h-5"></path>
                    <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
                    <path d="M8 16H3v5"></path>
                </svg>updated 13d ago</div>
            <div class="tag">#project</div>
            <div class="tag">#archive</div>
        </div>
        <pre class="frontmatter language-yaml" style="display: none;"><code class="language-yaml is-loaded"><span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> project
  <span class="token punctuation">-</span> archive
<span class="token key atrule">created</span><span class="token punctuation">:</span> <span class="token datetime number">2025-11-01</span>
<span class="token key atrule">updated</span><span class="token punctuation">:</span> <span class="token datetime number">2026-01-24T14:27:27+03:00</span>
<span class="token key atrule">up</span><span class="token punctuation">:</span> <span class="token string">"[[devlog]]"</span>
<span class="token key atrule">post</span><span class="token punctuation">:</span> <span class="token string">"[[snlx.net]]"</span>
<span class="token key atrule">layout</span><span class="token punctuation">:</span> base.njk</code></pre>
        <p dir="auto"><span alt="hello-world.svg" src="hello-world.svg" class="internal-embed media-embed image-embed is-loaded"><img alt="hello-world.svg" src="/"></span></p>
        <p dir="auto">My university is preparing for an upcoming math competition. They want to give each attendant a certificate so they need a tool that will take a template, put in the names, and export as PDF. They asked me what editor they could use. Sure, they could use something like libreoffice, but filling in each name and saving into a new file manually takes a bit too long. I want to make a simple utility that takes the list of names and the template, generates the certificates and exports them both as a single PDF (to print out) and as separate files (to send via e-mail).</p>
        <p dir="auto">This is a really simple project, and also a perfect opportunity to build a simple site (this one) as the styles are going to be shared.<br>
            I don't want any <em>images</em> on the site, so I'll try to stick with SVGs.</p>
        <h2 data-heading="Cert Layout" dir="auto">Cert Layout</h2>
        <p dir="auto">I started by sketching out the UI on a piece of paper. Since I won't include raster images, here's an excalidraw version of that:<br>
            <span alt="cert-excalidraw.light.svg" src="/cert-excalidraw.light.svg" class="internal-embed media-embed image-embed is-loaded"><img alt="cert-excalidraw.light.svg" src="/"></span>
        </p>
        <p dir="auto">I've considered using React or Lustre, but the project is simple enough I don't need them.</p>
        <p dir="auto">The bottom-left square is a placeholder for the university logo (for some reason we have 2 of them, this is for the simpler one). I've decided to write the SVG for it by hand (so it can be styled by the page), <a data-tooltip-position="top" aria-label="https://www.joshwcomeau.com/svg/interactive-guide-to-paths/" class="external-link" href="https://www.joshwcomeau.com/svg/interactive-guide-to-paths/">"An Interactive Guide to SVG Paths" by Josh W Comeau</a> is a very good resource to learn how to do that.</p>
        <p dir="auto">After writing the actual HTML I've decided to swap the name list and the settings, so the actual app is a reflected version of the drawing above.</p>
        <h2 data-heading="Template Selection" dir="auto">Template Selection</h2>
        <p dir="auto">I want pages to be based on <code>&lt;image&gt;</code>s, and that tag doesn't support PDF. I've found a <a data-tooltip-position="top" aria-label="https://github.com/iqbal-rashed/pdftoimg-js" class="external-link" href="https://github.com/iqbal-rashed/pdftoimg-js">simple library</a> to convert them to PNGs.</p>
        <h2 data-heading="Generating The Preview" dir="auto">Generating The Preview</h2>
        <p dir="auto">I could re-create every element on every change, but that seems a bit wasteful. A better option is to create some CSS variables and change them from the JS side.</p>
        <p dir="auto">Doing that means that the image src should also be set from css. <a data-tooltip-position="top" aria-label="https://stackoverflow.com/questions/2182716/is-it-possible-to-set-a-src-attribute-of-an-img-tag-in-css" class="external-link" href="https://stackoverflow.com/questions/2182716/is-it-possible-to-set-a-src-attribute-of-an-img-tag-in-css">A StackOverflow comment</a> mentioned that Firefox didn't allow you to do that, but it seems to work now. Sure, you could set the <code>background-image</code> property on a <code>div</code> instead, but then you'd need to calculate the aspect ratio of a newly uploaded image from JS.</p>
        <h2 data-heading="Text Alignment" dir="auto">Text Alignment</h2>
        <p dir="auto">The element is <code>position: absolute</code>. I've set <code>text-align</code> to <code>center</code> and this, obviously, didn't work. There are a few ways to fix this. I've tried an SVG overlay with <code>text-anchor</code>, but that didn't let me set <code>x</code> and <code>y</code> through CSS. An option that worked is simply <code>transform: translate</code>'ing the element (not using an SVG).</p>
        <p dir="auto">Well, kind of worked. It fixed the alignment, but scaling the page or printing it resulted in the text moving around. Returning to SVGs :)</p>
        <p dir="auto">SVG elements also support the normal <code>position: absolute</code> and <code>top</code>, <code>left</code>, <code>right</code>, <code>bottom</code> properties, so that solves the positioning problem.</p>
        <p dir="auto">For that to be useful, I need a viewbox though. Which means... Yes, figuring out the image dimensions from JS. Sure whatever. Except it still doesn't work. I couldn't figure out why, it seems like if I set the font size in a variable, it takes the HTML pixel size, not the SVG one.</p>
        <p dir="auto">Container-query units worked. They <em>always</em> work.</p>
        <h2 data-heading="Printing" dir="auto">Printing</h2>
        <p dir="auto">CSS allows you to customize the printed view using <code>@media print</code>.</p>
        <p dir="auto">Saving multiple files from JS is a whole thing though. The short version is that the browser does not allow printing without the dialog and that is the only reliable way. External libraries can't handle images created as object URIs in CSS. To be honest, that's quite reasonable, how long has it been since <em>you</em>'ve seen them being created like that?</p>
        <p dir="auto">Another option is to bring in the typst compiler and make it handle the PDF generation.</p>
        <h2 data-heading="User feedback" dir="auto">User feedback</h2>
        <ol>
            <li dir="auto">I was switching the language if <code>navigator.language === "ru"</code>, and that doesn't work on Windows because there it's <code>"ru-RU"</code>. Fixed</li>
            <li dir="auto">They asked me to use JetBrains Mono as the default font</li>
            <li dir="auto">The name input should also accept e-mails so the users know who to send the generated certs</li>
            <li dir="auto">Ideally there should be a send button</li>
        </ol>
        <p dir="auto">The last point is fun. I've never worked with E-Mails so this weekend I'm diving into that.</p>
        <h2 data-heading="Site Todo" dir="auto">Site Todo</h2>
        <p dir="auto">I'll link to this note from the next one, so the site should be able to display backlinks.</p>
    </main>
    <script src="https://snlx.net/mobile.js"></script>
    <!-- TODO router.js -->
    <!-- TODO include typ.js everywhere so it's downloaded in the bg & cached -->
</body>

</html>