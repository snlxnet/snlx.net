<!doctype html>
<html>

<head>
    <title>secret-note-updates</title>
    <link rel="stylesheet" href="/new.css">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
</head>

<body>
    <nav>
        <h2>Linked Notes</h2>
        <ul>
            <li class="back"><a href="/mk-secret">mk-secret</a></li>
            <li class="current"><a href="/secret-note-updates">secret-note-updates</a></li>
        </ul><a class="source" href="https://github.com/snlxnet/snlx.net"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-github-icon lucide-github">
                <path d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"></path>
                <path d="M9 18c-4.51 2-5-2-7-2"></path>
            </svg>Source&nbsp;code</a>
    </nav>
    <main>
        <div class="metadata">
            <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-feather-icon lucide-feather">
                    <path d="M12.67 19a2 2 0 0 0 1.416-.588l6.154-6.172a6 6 0 0 0-8.49-8.49L5.586 9.914A2 2 0 0 0 5 11.328V18a1 1 0 0 0 1 1z"></path>
                    <path d="M16 8 2 22"></path>
                    <path d="M17.5 15H9"></path>
                </svg>created <span data-date="2026-01-30T20:36:29+03:00" class="date">...</span> ago</div>
            <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw-icon lucide-refresh-cw">
                    <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                    <path d="M21 3v5h-5"></path>
                    <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
                    <path d="M8 16H3v5"></path>
                </svg>updated <span data-date="2026-02-17T21:34:05+03:00" class="date">...</span> ago</div>
            <div class="tag">#project</div>
        </div>
        <pre class="frontmatter language-yaml" style="display: none;"><code class="language-yaml is-loaded"><span class="token key atrule">updated</span><span class="token punctuation">:</span> <span class="token datetime number">2026-02-17T21:34:05+03:00</span>
<span class="token key atrule">created</span><span class="token punctuation">:</span> <span class="token datetime number">2026-01-30T20:36:29+03:00</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> project
<span class="token key atrule">post</span><span class="token punctuation">:</span> <span class="token string">"[[snlx.net]]"</span></code></pre>
        <p dir="auto">I've updated my site a few days ago (it's 2026-02-17 now) to have a sidebar with backlinks, see <a data-href="mk-bridge#Backlinks &amp; Redesign" href="/mk-bridge#Backlinks%20&amp;%20Redesign" class="internal-link">mk-bridge &gt; Backlinks &amp; Redesign</a> for more about that. The secret notes remained untouched, though, so now I need to:</p>
        <ol>
            <li dir="auto">switch them from MD to HTML</li>
            <li dir="auto">delete the <code>/secret</code> page, share by link instead</li>
            <li dir="auto">change the link behavior. If a secret note mentions another secret note, it is accessible, too</li>
        </ol>
        <h2 data-heading="Except" dir="auto">Except</h2>
        <p dir="auto">The current link resolution implementation works by extracting the UUIDs from file names and the file names from the frontmatter, which HTML files don't have.</p>
        <p dir="auto">Since I'm redoing this mechanism anyway, I'll probably change how it works</p>
        <h2 data-heading="January Secret Notes Review" dir="auto">January Secret Notes Review</h2>
        <p dir="auto">The good:</p>
        <ul>
            <li dir="auto">it's easy enough to turn a private note into a secret one</li>
            <li dir="auto">the <code>/secret</code> page looks cool</li>
            <li dir="auto">I think it's secure enough</li>
        </ul>
        <p dir="auto">The bad:</p>
        <ul>
            <li dir="auto">sharing is unnecesserilly hard because the person has to manually paste the key into the <code>/secret</code> page</li>
            <li dir="auto">contexts are not that easy to manage</li>
            <li dir="auto">to share a note to a certain context, I have to go to that context and change it, instead of modifying the note I'm writing</li>
        </ul>
        <h2 data-heading="February Solution" dir="auto">February Solution</h2>
        <ol>
            <li dir="auto">The fields stay the same</li>
            <li dir="auto">The plugin generates <code>access.json</code> and sends it to the server</li>
            <li dir="auto"><code>access.json</code> is a list of keys (UUIDs) and values (arrays of note names)</li>
            <li dir="auto">notes are now stored by their names, not UUIDs</li>
        </ol>
        <p dir="auto">So the structure should look like:</p>
        <pre class="language-json"><code class="language-json is-loaded"><span class="token punctuation">{</span>
    <span class="token property">"sea-uuid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"sea"</span><span class="token punctuation">,</span> <span class="token string">"sea-caddy"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"sea-caddy-uuid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"sea-caddy"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"uni-uuid"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"uni"</span><span class="token punctuation">,</span>
        <span class="token string">"physics-lecture-02"</span><span class="token punctuation">,</span>
        <span class="token string">"physics-lecture-04"</span><span class="token punctuation">,</span>
        <span class="token string">"example-image"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"physics-lecture-02-uuid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"physics-lecture-02"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"physics-lecture-04-uuid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"physics-lecture-04"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"colleague-uuid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"colleague"</span><span class="token punctuation">,</span> <span class="token string">"staging-credentials"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">"staging-credentials-uuid"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"staging-credentials"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
        <p dir="auto">Notes can be shared like this: <code>snlx.net/uni?invite=uni-uuid</code>. When you open the page, a client script loads the UUID into localstorage and deletes it from the URL.</p>
        <p dir="auto">The server gets a <code>/file?name=uni&amp;keys=uni-uuid,sea-uuid</code>, checks <code>access.json</code> and responds with a <code>404</code> if that UUID doesn't exist of it does, but the name doesn't appear under it, or a <code>200</code> with the HTML otherwise.</p>
        <p dir="auto">The links are now resolved recursively, though I was too lazy to implement the recursive function properly, so it's the dumbest thing limited by the depth of 4 links.</p>
    </main>
    <script type="module" src="/client.js"></script>
</body>

</html>